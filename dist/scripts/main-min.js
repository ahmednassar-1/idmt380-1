const color_picker=document.querySelector('input[type="color"]'),color_wheel=document.querySelector(".stack");function reset_active_swatch(){var e=document.querySelector(".swatch.active");e&&e.classList.remove("active")}color_wheel.addEventListener("click",()=>{color_picker.click()});const swatches=document.querySelectorAll(".swatch");swatches.forEach(e=>{e.style.backgroundColor=e.dataset.swatch,e.setAttribute("title",e.dataset.swatch),e.addEventListener("click",()=>{reset_active_swatch(),e.classList.add("active"),color_mode="swatch",new_swatch=e})}),color_picker.addEventListener("click",()=>{color_mode="picker",reset_active_swatch()});var color_mode="picker";function choose_color(){"picker"==color_mode?color=color_picker.value:"swatch"==color_mode&&(color=new_swatch.dataset.swatch)}color_picker.setAttribute("value",swatches[0].dataset.swatch),choose_color();const main_area=document.querySelector(".main-area");let artwork=document.querySelector(".main-area svg");main_area.addEventListener("click",e=>{choose_color(),e.target.style.fill=color,push_version(),artwork.style.fill="black"});const download_btn=document.querySelector('[data-command="download"]');download_btn.addEventListener("click",()=>{const e=document.querySelector(".main-area").innerHTML,o=new Blob([e.toString()]),t=document.createElement("a");t.download="My-Coloring-Book.svg",t.href=window.URL.createObjectURL(o),t.click(),t.remove()});let versions=[artwork.cloneNode(!0)];function push_version(){30==versions.length&&versions.pop();var e=artwork.cloneNode(!0);versions.unshift(e)}const undo_btn=document.querySelector('[data-command="undo"]');undo_btn.addEventListener("click",undo);var x=0;function undo(){artwork=document.querySelector(".main-area svg"),1==versions.length?alert("There is nothing to undo!"):(artwork.remove(),versions.shift(),x+=1,main_area.appendChild(versions[0]))}const upload_btn=document.querySelector('[data-command="upload"]'),upload_preview_container=document.querySelector(".upload-preview"),artwork_input=document.querySelector("input#artwork-html");upload_btn.addEventListener("click",()=>{var e=document.querySelector(".upload-preview svg");e&&e.remove();var o=(artwork=document.querySelector(".main-area svg")).cloneNode(!0);upload_preview_container.appendChild(o),artwork_input.value=main_area.innerHTML,toggle_upload_screen()});var upload_modal=document.querySelector(".upload-modal");const upload_reset_btn=document.querySelector('button[type="reset"]');function toggle_upload_screen(){document.querySelector(".upload-modal.opened")?(upload_modal.classList.remove("opened"),upload_modal.classList.add("closed")):(upload_modal.classList.remove("closed"),upload_modal.classList.add("opened"))}upload_reset_btn.addEventListener("click",()=>{toggle_upload_screen()});